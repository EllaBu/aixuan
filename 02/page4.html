<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <title>Title</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/mobileSelect.css">

</head>
<body>
<div class="new-wrapper">
    <!-- 添加家庭成员 -->

    <h3 class="new-title">家庭成员</h3>
    <ul class="person-list">
        <li>
            <span><img src="./img/man.png" alt=""></span>
            <b>张三丰（本人）</b>
            <i>年龄：28</i>
            <a href="javascript:;">编辑</a>
        </li>
        <li>
            <span><img src="./img/man.png" alt=""></span>
            <b>张三丰（本人）</b>
            <i>年龄：28</i>
            <a href="javascript:;">编辑</a>
        </li>
        <li>
            <span><img src="./img/man.png" alt=""></span>
            <b>张三丰（本人）</b>
            <i>年龄：28</i>
            <a href="javascript:;">编辑</a>
        </li>
    </ul>
    <div class="btn-list">
        <a href="javascript:;">+添加成员</a>
    </div>

    <div class="person-new-add" style="display: none">
        <div class="person-add">
            <div class="item">
                <label for="">姓名：</label>
                <input type="text">
            </div>
            <div class="item">
                <label for="">身份：</label>
                <span id="identity" class="mobile-select"></span>
            </div>
            <div class="item">
                <label for="">性别：</label>
                <div class="img-choose">
                    <span class="active"><img src="./img/man.png" alt=""></span>
                    <span><img src="./img/women.png" alt=""></span>
                </div>
            </div>
            <div class="item">
                <label for="">生日：</label>
                <span id="birthday" class="mobile-select"></span>
            </div>
            <div class="item">
                <button class="save-btn">保存</button>
            </div>
        </div>
    </div>


</div>
<script src="./js/jquery-2.2.4.min.js"></script>
<script src="./js/mobileSelect.min.js"></script>
<script>
    $(function () {
        $('.new-wrapper').on('click', '.img-choose span', function () {
            $(this).addClass('active').siblings().removeClass('active')
        })

        var addHtml = '<div class="person-add">\n' +
            '                <div class="item">\n' +
            '                    <label for="">姓名：</label>\n' +
            '                    <input type="text">\n' +
            '                </div>\n' +
            '                <div class="item">\n' +
            '                    <label for="">身份：</label>\n' +
            '                    <span id="identity" class="mobile-select"></span>\n' +
            '                </div>\n' +
            '                <div class="item">\n' +
            '                    <label for="">性别：</label>\n' +
            '                    <div class="img-choose">\n' +
            '                        <span class="active"><img src="./img/man.png" alt=""></span>\n' +
            '                        <span><img src="./img/women.png" alt=""></span>\n' +
            '                    </div>\n' +
            '                </div>\n' +
            '                <div class="item">\n' +
            '                    <label for="">生日：</label>\n' +
            '                    <span id="birthday" class="mobile-select"></span>\n' +
            '                </div>\n' +
            '                <div class="btn-item">\n' +
            '                    <button class="save-btn">保存</button>\n' +
            '                </div>\n' +
            '            </div>'
        $('.person-list').on('click', 'a', function () {
            console.log($(this).parents('li').attr('add'))
            if ($(this).parents('li').attr('add')) {
                return false;
            }else {
                $(this).parents('li').siblings().removeAttr('add')
                $(this).parents('li').siblings().find('.person-add').remove()
                $(this).parents('li').append(addHtml)
                $(this).parents('li').attr('add', true)
            }
            /*$(this).parents('li').find('.person-add').slideDown();*/
        })
        $('.person-list li').on ('click', '.save-btn', function () {
            console.log(111)
            $(this).parents('li').removeAttr('add')
            $(this).parents('.person-add').remove();

        })
        $('.add-btn').click(function () {
            $('.person-new-add').slideDown();
        })
        $('.person-new-add .save-btn').click(function () {
            $(this).parents('.person-new-add').slideUp();
        })
    })
    var identityArr = ['周日','周一','周二','周三','周四','周五','周六'];
    var mobileSelect1 = new MobileSelect({
        trigger: '#identity',
        title: '选择身份',
        wheels: [
            {data: identityArr}
        ],
        position:[2], //初始化定位 打开时默认选中的哪个 如果不填默认为0
    });
    var yearArr = ['1900年','1902年','1902年','1903年']
    var monthArr = ['1月','2月','3月','4月','5月','6月','7月','8月']
    var dayArr = ['1日','2日']
    var mobileSelect2 = new MobileSelect({
        trigger: '#birthday',
        title: '选择生日',
        wheels: [
            {data: yearArr},
            {data: monthArr},
            {data: dayArr}
        ],
        position:[2], //初始化定位 打开时默认选中的哪个 如果不填默认为0
    });
</script>
</body>
</html>